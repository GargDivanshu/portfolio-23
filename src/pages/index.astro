---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import Toolbar from "../components/Toolbar.astro";
import Hero from "../components/Hero/index.astro";
---

<!-- <link rel="stylesheet" href="https://unpkg.com/sheryjs/dist/Shery.css" /> -->
<Layout title="Welcome to Astro.">
  <div class="cursor"></div>
  <nav
    style={{
      borderBottom: ".0625rem solid rgba(255, 255, 255, .1)",
    }}
    class="flex max-w-[1940px] w-4/5 mx-auto justify-between text-white p-4 top-0 sticky z-100"
  >
    <div>Divanshu</div>
    <ul class="flex gap-4">
      <li>Contact</li>
      <!-- <li>
				Blog
			</li> -->
    </ul>
  </nav>
  <Hero />

  <div 
  class="h-full md:w-[65%] w-full relative home">

    <div class="w-[30vh] h-[30vh] bg-[#FF568D] blur-xl bottom-0 rounded-full absolute floating"></div>
    <div class="w-[20vh] h-[20vh] blur-xl right-[0%] rounded-full absolute bg-[#AEDEFC] floating"></div>
    <!-- <div class="w-[30vh] h-[30vh] blur-xl rounded-full absolute bg-[#FFDFDF] top-[50%] right-[0%]"></div> -->

    <div class="md:w-4/5 w-full mx-auto absolute h-[10vh] left-0 right-0 inset-y-1/4 text-center">
      Hey there, I'm <span class="font-bold">Divanshu</span>. I am a ...
    </div>
    <div
    class="absolute h-[15vh] overflow-y-hidden md:w-4/5 w-full mx-auto inset-y-1/3 right-0 left-0 text-[#FFC600]">
    <!-- overflow-y-hidden -->
      <div id="intro" class="text-6xl font-bold mx-auto cursor-scale text-center py-2">
        Developer
      </div>
      <div id="intro" class="text-6xl font-bold mx-auto cursor-scale text-center py-2">
        Freelancer
      </div>
    </div>

    <div class="absolute overflow-y-hidden h-[15vh] md:w-4/5 w-full mx-auto inset-y-1/2 right-0 left-0">
      <div class="relative changingText">
        <div class="absolute mx-auto cursor-scale left-0 right-0 text-center md:text-2xl text-xl upper">
          <!-- writing code -->
        </div>
        <div class="absolute mx-auto left-0 right-0 cursor-scale text-center md:text-2xl text-xl -z-10 lower">
          <!-- I have been breaking code -->
        </div>
      </div>
      
    </div>
  </div>

  <div class="rounded-[3rem] bg-[#2D2E34]">
    <div class="h-[100vh] max-w-[1940px] w-4/5 mx-auto relative">
      <div
        id="revealType"
        class="md:text-5xl text-xl m-auto top-0 bottom-0 left-0 right-0 absolute h-fit w-[90%] font-bold text-center text-white revealType"
      >
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Impedit animi
        deleniti facere itaque doloremque pariatur veritatis quis, dolorum
        perferendis illum incidunt aperiam unde quaerat odio!
      </div>
    </div>
  </div>

  <div
    class="h-fit w-[100%] mx-auto relative flex gallery align-middle justify-center"
  >
    <div class="left h-fit w-1/2 text-white">
      <div class="h-[100vh] relative">
        <div class="m-auto absolute bottom-0 top-0 left-0 right-0 p-[10%]">
          <h1 class="text-center">My Stack</h1>
          <div class="grid grid-4 md:grid-cols-5 grid-cols-2">
            <div class="">NextJs</div>
            <div>NextJs</div>
            <div>NextJs</div>
            <div>NextJs</div>
            <div>NextJs</div>
            <div>NextJs</div>
            <div>NextJs</div>
          </div>
        </div>
      </div>
      <div class="h-[100vh]">backend skills</div>
      <div class="h-[100vh]"></div>
    </div>
    <div class="right h-[100vh] w-1/2 relative">
      <div
        class="bg-white rounded-[3rem] absolute top-0 bottom-0 h-[80vh] w-[90%] m-auto"
      >
        <div class="p-[10%] h-full w-full border-inherit">Text</div>
      </div>
    </div>
  </div>

  <div class="h-[100vh]"></div>

  <Toolbar />
</Layout>

<!-- <script  type="text/javascript"  src="https://unpkg.com/sheryjs/dist/Shery.js"></script> -->
<script
  is:inline
  src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<script
  is:inline
  src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.27/dist/lenis.min.js"
></script>
<!-- Scroll Trigger is needed for Scroll Effects -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" ></script> -->

<!-- Three.js is needed for 3d Effects -->
<script
  is:inline
  src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.155.0/three.min.js"
></script>

<!-- ControlKit is needed for Debug Panel -->
<script
  src="https://cdn.jsdelivr.net/gh/automat/controlkit.js@master/bin/controlKit.min.js"
  is:inline
  type="text/javascript"></script>
<script
  is:inline
  src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"
></script>
<script is:inline src="https://unpkg.com/split-type"></script>

<script type="text/javascript">
  var cursor = document.querySelector(".cursor"),
    cursorScale = document.querySelectorAll(".cursor-scale"),
    changeText = document.querySelector(".changingText"),
    upper = document.querySelector(".upper"),
    lower = document.querySelector(".lower"),
    intro = changeText.querySelectorAll("div"),
    mouseX = 0,
    mouseY = 0;

  gsap.to({}, 0.016, {
    repeat: -1,
    onRepeat: function () {
      gsap.set(cursor, {
        css: {
          left: mouseX,
          top: mouseY,
        },
      });
    },
  });

  window.addEventListener("mousemove", function (e) {
    mouseX = e.clientX;
    mouseY = e.clientY;
  });

  cursorScale.forEach((link) => {
    link.addEventListener("mouseleave", () => {
      cursor.classList.remove("grow");
    });
    link.addEventListener("mousemove", () => {
      cursor.classList.add("grow");
    });
  });

  var h1s = document.querySelectorAll("#intro");
  var index = 0;
  document.querySelector("main").addEventListener("click", function () {
    gsap.to(h1s[index], {
      y: "-=100%",
      duration: 1,
      ease: Expo.easeInOut,
      onComplete: function () {
        gsap.set(this._targets[0], {
          y: index !== 0 ? "100%" : "0%",
        });
      },
    });
    index === h1s.length - 1 ? (index = 0) : index++;
    gsap.to(h1s[index], {
      y: "-=100%",
      duration: 1,
      ease: Expo.easeInOut,
    });
  });
</script>

<script>
  import gsap from 'gsap'
  import SplitType from 'split-type';


  gsap.registerPlugin(ScrollTrigger);

  const splitTypes = document.querySelectorAll(".revealType");
  splitTypes.forEach((char) => {
    const text = new SplitType(char, { types: "chars" });

    console.log("tetx.chars: " + text.chars);
    gsap.from(text.chars, {
      scrollTrigger: {
        trigger: char,
        start: "top 75%",
        end: "top 25%",
        scrub: true,
        markers: false,
        toggleActions: "play play reverse reverse",
      },
      opacity: 0.2,
      stagger: 0.1,
      // scaleY: 0,
      // y: -20,
      // transformOrigin: 'bottom',
      // opacity: 0.2,
      // stagger: 0.1
    });
  });

  ScrollTrigger.create({
    trigger: ".gallery",
    start: "top top",
    end: "bottom bottom",
    // scrub: true,
    pin: ".right",
    // markers: true,
    // toggleActions: 'play play reverse reverse'
  });

  const lenis = new Lenis();

  lenis.on("scroll", (e) => {
    console.log(e);
  });

  function raf(time) {
    lenis.raf(time);
    requestAnimationFrame(raf);
  }

  requestAnimationFrame(raf);
</script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Acme&family=Archivo&family=Audiowide&family=Black+Ops+One&family=Cinzel&family=Cookie&family=DM+Serif+Display&family=Dancing+Script&family=Great+Vibes&family=Indie+Flower&family=Inter&family=Kaushan+Script&family=Pacifico&family=Permanent+Marker&family=Philosopher&family=Poppins:wght@200&family=Raleway&family=Rowdies&family=Russo+One&family=Satisfy&family=Tangerine&family=Tourney&family=Ultra&family=Vina+Sans&family=Work+Sans:wght@300;900&family=Zeyada&display=swap');
  body {
    text: #1a1a1a;
  }
  main {
    margin: auto;
    padding: 1rem;
    /* width: 800px; */
    /* max-width: calc(100% - 2rem); */
    color: white;
    font-size: 20px;
    line-height: 1.6;
  }
  .astro-a {
    position: absolute;
    top: -32px;
    left: 50%;
    transform: translatex(-50%);
    width: 220px;
    height: auto;
    z-index: -1;
  }
  h1 {
    font-size: 4rem;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    margin-bottom: 1em;
  }
  .text-gradient {
    background-image: var(--accent-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 400%;
    background-position: 0%;
  }
  .instructions {
    margin-bottom: 2rem;
    border: 1px solid rgba(var(--accent-light), 25%);
    background: linear-gradient(
      rgba(var(--accent-dark), 66%),
      rgba(var(--accent-dark), 33%)
    );
    padding: 1.5rem;
    border-radius: 8px;
  }
  .instructions code {
    font-size: 0.8em;
    font-weight: bold;
    background: rgba(var(--accent-light), 12%);
    color: rgb(var(--accent-light));
    border-radius: 4px;
    padding: 0.3em 0.4em;
  }
  .instructions strong {
    color: rgb(var(--accent-light));
  }
  .link-card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(24ch, 1fr));
    gap: 2rem;
    padding: 0;
  }
  .cursor {
    border-radius: 50%;
    width: 40px;
    height: 40px;
    position: fixed;
    margin-left: -20px;
    margin-top: -20px;
    border: 4px solid #ff568d;
    transition: transform 0.2s ease-in-out;
    pointer-events: none;
    z-index: 1000;
    transform-origin: center center;
  }
  .grow,
  .grow-small {
    transform: scale(3);
    background: #f8e8ee;
    mix-blend-mode: difference;
    border: none;
  }
  .grow-small {
    transform: scale(2.5);
  }
  .floating {
    animation-name: floating;
    animation-duration: 3s;
    animation-iteration-count: infinite;
    animation-timing-function: ease-in-out;
    margin-left: 30px;
    margin-top: 5px;
  }

  @keyframes floating {
    0% {
      transform: translate(0, 0px);
    }
    50% {
      transform: translate(0, 5vh);
    }
    100% {
      transform: translate(0, -0px);
    }
  }
  /* .upper::before{
	opacity: 1;
	content: "writing code";
	mix-blend-mode: difference;
}
.changingText:hover .upper {
	opacity: 0;
	mix-blend-mode: difference;
}

.lower::before{
	opacity: 0;
	content: "I have been breaking code";
	mix-blend-mode: difference;
}
.changingText:hover .lower {
	opacity: 1;
	content: "I have been breaking code";
	mix-blend-mode: difference;
} */
</style>
